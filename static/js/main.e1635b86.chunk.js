(this["webpackJsonpvisualize-corona"]=this["webpackJsonpvisualize-corona"]||[]).push([[0],{145:function(e,t,a){e.exports=a(259)},150:function(e,t,a){},151:function(e,t,a){},259:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),c=a.n(l),o=(a(150),a(141)),i=a(54),u=(a(151),a(32)),s=a.n(u),m=a(16),p=a(30),d=a(53),f=a(74),E=a.n(f),y=a(144),h=a(9),g=a(269),v=a(70),b=a(274),O=a(275),C=a(51),x=a(273),j=a(31),w=a(111),S=a(122),D=a(135),_=a(272),k=a(47),T=a(35),N=a.n(T),R=a(136),F=a.n(R),z=(a(175),function(){var e=Object(k.b)(),t=Object(k.c)((function(e){return e.visualizeData})),a=Object(n.useState)(Object.keys(t).sort()),l=Object(p.a)(a,1)[0],c=Object(k.c)((function(e){return e.singleCountryData})),o=Object(n.useState)({}),i=Object(p.a)(o,2),u=i[0],s=i[1],d=c.country,f=c.type,E=c.xaxisDateDiff,y=c.CRD,g=c.scatterType,v=Object(n.useState)(!1),O=Object(p.a)(v,2),C=O[0],x=O[1];Object(n.useEffect)((function(){c.country&&C&&(console.log("sing c and apply"),e({type:"SET_PLOT",payload:u}),x(!1))}),[u]),Object(n.useEffect)((function(){console.log("modify useeffect"),function(e){if("CRD"===e&&y.length){console.log("waaaaaaaah");var a=!1,n={data:[],layout:{title:d+" "+f+" chart",xaxis:{}},frames:[],config:{}},r={cases:"confirmed",deaths:"deaths",recovered:"recovered",active:"active",new_confirmed:"new_confirmed",new_deaths:"new_deaths",new_recovered:"new_recovered",date:"date"},l={cases:"#E33427",deaths:"#5A0924",recovered:"#09D32C",active:"#10AAC0",new_confirmed:"#3E08E0",new_deaths:"#78BBD9",new_recovered:"#98AAC0"};if(["scatter","bar"].includes(f)&&(y.forEach((function(e){var c=t[d].timeline.date,o=t[d].timeline[r[e]],i={type:f,x:c,y:o,name:e,marker:{color:l[e]}};"scatter"===f&&(i.mode=g[e]?g[e]:"lines"),n.data.push(i),a=!0})),n.layout.xaxis={dtick:864e5*c.xaxisDateDiff,automargin:!0,title:{text:"Timeline",standoff:5},autorange:!0,rangeselector:{buttons:[{count:1,label:"1m",step:"month",stepmode:"backward"},{count:3,label:"3m",step:"month",stepmode:"backward"},{count:6,label:"6m",step:"month",stepmode:"backward"},{step:"all"}]},rangeslider:{range:[]},type:"date"}),"pie"===f){var o=c.pieDateSingle;if(y.length&&o){var i=t[d].timeline.date,u=[],m=[],p=[];y.forEach((function(e){var a=t[d].timeline[r[e]],n=i.indexOf(o),c=o?a[n]:a.pop();u.push(c),m.push(e),p.push(l[e])}));var E={type:f,values:u,labels:m,marker:{colors:p},texttemplate:"%{label}: %{value} (%{percent})",textinfo:"label+percent",textposition:"outside",automargin:!0};n.data.push(E),n.layout.title=n.layout.title+" as on "+(o||i.pop()),a=!0}}a&&s(n)}}("CRD"),x(!0)}),[c]);var T=["Cases","Deaths","Recovered","Active"];return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.e,{closeOnSelect:!0},r.a.createElement(w.a,{mt:2,as:b.a,variantColor:"blue",size:"md"},"Select country"),r.a.createElement(w.d,{minWidth:"240px",maxHeight:"70vh",overflowY:"scroll"},r.a.createElement(S.b,{title:"Country",type:"radio",onChange:function(a){e({type:"SET_SINGLE_COUNTRY",payload:a}),e({type:"SET_SINGLE_COUNTRY_dateRange",payload:Object.keys(t[a].timeline.dataByDate).reverse()})},defaultValue:d},l.map((function(e){return r.a.createElement(S.a,{key:e,value:e},e)}))))),d?r.a.createElement(r.a.Fragment,null,r.a.createElement(w.e,{closeOnSelect:!0},r.a.createElement(w.a,{mt:2,as:b.a,variantColor:"blue",size:"md"},"Select type"),r.a.createElement(w.d,{minWidth:"240px"},r.a.createElement(S.b,{title:"type",type:"radio",onChange:function(t){return e({type:"SET_SINGLE_COUNTRY_TYPE",payload:t})},defaultValue:f},["Bar","Scatter","Pie"].map((function(e){return r.a.createElement(S.a,{key:e.toLowerCase(),value:e.toLowerCase()},e)}))))),f?r.a.createElement(r.a.Fragment,null,r.a.createElement(w.e,{closeOnSelect:!1},r.a.createElement(w.a,{mt:2,as:b.a,variantColor:"blue",size:"md"},"Add to graph"),r.a.createElement(w.d,{minWidth:"240px"},r.a.createElement(S.b,{title:"Select one or more",type:"checkbox",onChange:function(t){return e({type:"SET_SINGLE_COUNTRY_CRD",payload:t})},defaultValue:y},T.map((function(e){return r.a.createElement(S.a,{key:e.toLowerCase(),value:e.toLowerCase()},e)}))))),"scatter"===f&&y.length?r.a.createElement(w.e,{closeOnSelect:!1},r.a.createElement(w.a,{mt:2,as:b.a,variantColor:"blue",size:"md"},"Modes"),r.a.createElement(w.d,{minWidth:"240px",position:"relative"},T.map((function(t){var a=t.toLowerCase();return y.includes(a)?r.a.createElement(n.Fragment,{key:t+"modeFragment"},r.a.createElement(S.b,{key:t+"modes",title:t,type:"radio",defaultValue:a+"-"+g[a],onChange:function(t){return function(t){var a=t.split("-");e({type:"SET_SINGLE_COUNTRY_scatterType",payload:Object(m.a)({},g,Object(j.a)({},a[0],a[1]))})}(t)}},r.a.createElement(S.a,{key:a+"-markers",value:a+"-markers"},"Markers"),r.a.createElement(S.a,{key:a+"-lines",value:a+"-lines"},"Lines"),r.a.createElement(S.a,{key:a+"-lines+markers",value:a+"-lines+markers"},"Lines + Markers")),r.a.createElement(w.b,{key:t+"divider"})):null})))):null,["bar","scatter"].includes(f)&&y.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{color:"gray.500",mt:2},"Select spacing between date on xaxis"),r.a.createElement(_.c,{mt:2,defaultValue:E,onChange:function(t){return e({type:"SET_SINGLE_COUNTRY_xaxisDateDiff",payload:t})}},r.a.createElement(_.d,{type:"number",placeholder:"Default"})," ",r.a.createElement(_.e,null,r.a.createElement(_.b,null),r.a.createElement(_.a,null)))):null,"pie"===f&&y.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{mt:2},r.a.createElement(F.a,Object.assign({},c.pieDateSingle?{selected:N()(c.pieDateSingle,N.a.defaultFormat).toDate()}:void 0,{dateFormat:"dd/MM/yyyy",onChange:function(t){return e({type:"SET_SINGLE_COUNTRY_pieDateSingle",payload:N()(t).format("YYYY-MM-DD")})},minDate:N()(c.dateRange[0],N.a.defaultFormat).toDate(),maxDate:N()(c.dateRange[c.dateRange.length-1],N.a.defaultFormat).toDate(),includeDates:c.dateRange.map((function(e){return N()(e,N.a.defaultFormat).toDate()})),placeholderText:"Select a date"})))):null):null):null)}),I=function(){var e=Object(g.a)(),t=e.isOpen,a=e.onOpen,l=e.onClose,c=r.a.useRef(),o=Object(n.useState)(""),i=Object(p.a)(o,2),u=i[0],s=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{ref:c,pos:"absolute",bottom:"10%",left:"1%",variantColor:"teal",onClick:a,zIndex:100,key:"menu-button",leftIcon:"edit"},"Create"),r.a.createElement(O.a,{isOpen:t,placement:"left",onClose:l,isFullHeight:!0,key:"drawer-content"},r.a.createElement(O.c,null),r.a.createElement(O.b,null,r.a.createElement(C.f,null,"Create your chart"),r.a.createElement(C.b,null,r.a.createElement(h.a,{flexDirection:"column",display:"flex",alignItems:"baseline",justifyContent:"space-between"},r.a.createElement(x.a,{placeholder:"Select option",onChange:function(e){return s(e.target.value)},defaultValue:u},r.a.createElement("option",{value:"country-chart"},"Country Chart"),r.a.createElement("option",{value:"compare-countries"},"Compare Countries")),function(e){switch(e){case"country-chart":return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{key:"country-chart"}));case"compare-countries":return r.a.createElement(v.a,{status:"info",mt:2},r.a.createElement(v.c,null),"Compare Countries feature is coming soon!");default:return}}(u))),r.a.createElement(C.e,null,r.a.createElement(b.a,{variant:"outline",mr:3,onClick:l},"Close")))))},L=function(){return r.a.createElement("div",null,"left side desktop")},Y=a(140),A=a.n(Y);function U(e){return G.apply(this,arguments)}function G(){return(G=Object(d.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://corona.lmao.ninja/v2/historical?lastdays=all","https://corona-api.com/countries?include=timeline",e.prev=2,a="old"===t?"https://corona.lmao.ninja/v2/historical?lastdays=all":"https://corona-api.com/countries?include=timeline",e.next=6,E.a.get(a);case 6:return n=e.sent,e.abrupt("return",n.data);case 10:return e.prev=10,e.t0=e.catch(2),console.log("Failed to fetch countries: ".concat(e.t0.message),e.t0),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function M(){var e=Object(k.b)(),t=Object(k.c)((function(e){return e.plotReducer.plotData})),a=Object(n.useState)(null),l=Object(p.a)(a,2),c=l[0],o=l[1],i=function(){var t=Object(d.a)(s.a.mark((function t(){var a,n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U("new").then((function(e){return e}));case 2:return a=t.sent,t.next=5,console.log(a);case 5:return n={},function(){a.forEach((function(e){var t=e.country,a=e.province,r=e.timeline;a?(n[t]=Object(m.a)({},n[t]),n[t].province=Object(m.a)({},n[t].province),n[t].province[a]={province:a,timeline:r}):n[t]=r}))},r=function(){a.data.forEach((function(e){var t=e.name,a=Object.keys(e),r={};a.forEach((function(t){if("timeline"===t){var a=e[t],n={},l={},c=a[1]?Object.keys(a[1]):null;c&&c.forEach((function(e){n[e]=a.map((function(t){return"date"===e&&(l[t.date]=t),t[e]})).reverse()})),n.dataByDate=l,r[t]=n}else r[t]=e[t]})),n[t]=Object(m.a)({},r)}))},t.next=10,r();case 10:return t.next=12,o(n);case 12:e({type:"SET_API_DATA",payload:n});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){console.log("calling get data useffect"),i()}),[]),r.a.createElement("div",{className:"visualize-comp"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"visualise-div"},r.a.createElement("div",{className:"left-option-div"},c?r.a.createElement(I,{key:"drawer-option"}):r.a.createElement(r.a.Fragment,null,"'Fetching Data'",r.a.createElement(y.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"}))),r.a.createElement(h.a,{d:"flex",width:"full",height:"96%",flexDirection:"row",bg:"#485"},r.a.createElement(h.a,{width:"20%"},r.a.createElement(L,null)),r.a.createElement(h.a,{d:"flex",flexDirection:"column",width:"80%",height:"100%",bg:"#999",pr:0},r.a.createElement(A.a,{data:t.data,layout:Object(m.a)({},t.layout,{type:"date",barmode:"group",autosize:!0,height:.96*window.innerHeight}),config:Object(m.a)({},t.config,{displayModeBar:!0,displaylogo:!1,scrollZoom:!0,responsive:!0,useResizeHandler:!0,style:{width:"100%",height:"100%"},toImageButtonOptions:{format:"jpeg",scale:3}})}))))))}var B=a(42),P=a(270),V=a(277),W=a(278),H=a(279),J=a(21),Z=a.n(J);function $(){return q.apply(this,arguments)}function q(){return(q=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("https://corona.lmao.ninja/v2/countries");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.log("Failed to fetch countries: ".concat(e.t0.message),e.t0),e.abrupt("return");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var K=function(){var e=Object(d.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$().then((function(e){return e}));case 2:if(t=e.sent,Array.isArray(t)&&t.length>0){e.next=6;break}return e.abrupt("return");case 6:return a={type:"FeatureCollection",features:t.map((function(e){var t=e.countryInfo,a=void 0===t?{}:t,n=a.lat,r=a.long;return{type:"Feature",properties:Object(m.a)({},e),geometry:{type:"Point",coordinates:[r,n]}}}))},e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(n.useState)(null),t=Object(p.a)(e,2),a=t[0],l=t[1],c=function(){var e=Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K().then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){c().then((function(e){console.log(e),l(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"map"},r.a.createElement(W.a,{center:[51.505,-.09],zoom:5},r.a.createElement(H.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),a?a.features.map((function(e){return function(e){var t=e.properties,a=new Date(t.updated),n=N()(a).fromNow();return r.a.createElement(P.a,{icon:new Z.a.icon({iconUrl:"https://img.icons8.com/color/96/000000/marker.png",iconSize:[25,25]}),key:t.country,position:Object(B.a)(e.geometry.coordinates).reverse()},r.a.createElement(V.a,null,r.a.createElement("div",{className:"markerCustom"},r.a.createElement("img",{src:t.countryInfo.flag,alt:"country flag",style:{height:"auto",width:"50%"}})),r.a.createElement("br",null),r.a.createElement("div",{className:"countryPopUp"},r.a.createElement("li",null," Total Cases : ",t.cases," "),r.a.createElement("div",{className:"todayAdded"}," +",t.todayCases," "),r.a.createElement("li",null," Active : ",t.active," "),r.a.createElement("li",null," Recovered : ",t.recovered," "),r.a.createElement("li",null," Updated ",n," "))))}(e)})):console.log("data not fetched or markers not working"))))},X=a(271),ee=a(26),te=a(276),ae=function(){var e=function(){var e=Object(X.a)();return Object(n.useEffect)((function(){e({position:"bottom-right",duration:null,isClosable:!0,render:function(){var e=window.location.pathname.split("/").pop();return r.a.createElement(h.a,{m:3,color:"white",p:3,bg:"blue.500"},r.a.createElement("a",{href:"graph"!==e?"/visualize-corona/graph":"/visualize-corona"},"graph"!==e?"Visualize":"Map"))}})}),[]),r.a.createElement(r.a.Fragment,null)};return r.a.createElement(o.a,null,r.a.createElement(ee.a,null,r.a.createElement(te.a,null),r.a.createElement(e,null),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"app-90"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/visualize-corona/graph"},r.a.createElement(M,null)),r.a.createElement(i.a,{path:"/"},r.a.createElement(Q,null)))),r.a.createElement("div",{className:"info-box"},r.a.createElement("div",{className:"footnote"},r.a.createElement("a",{href:"http://devcj.in"},"Built By ",r.a.createElement("span",{className:"highlight"},"CJ")))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ne=a(50),re={},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_API_DATA":return Object(m.a)({},e,{},t.payload);default:return e}},ce={plotData:{data:[{type:"bar",x:["a","b","c"],y:[2,5,6]},{type:"bar",x:["a","b","c"],y:[2,5,3]}],layout:{autosize:!0,title:"A sample plot",barmode:"group",xaxis:{}},frames:[],config:{}}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLOT":return{plotData:Object(m.a)({},t.payload,{layout:Object(m.a)({},t.payload.layout,{images:[{name:"watermark_CJ",source:"https://devcj.in/images/logo.png",xref:"paper",yref:"paper",x:0,y:.9,sizex:.1,sizey:.1,opacity:.1,layer:"below"}]})})};default:return e}},ie={country:"",type:"",CRD:[],scatterType:{},pieDateType:"single",pieDateSingle:"",xaxisDateDiff:0,dateRange:[]},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SingleCountryData":return Object(m.a)({},e,{},t.payload);case"SET_SINGLE_COUNTRY":return Object(m.a)({},e,{country:t.payload});case"SET_SINGLE_COUNTRY_TYPE":return Object(m.a)({},e,{type:t.payload});case"SET_SINGLE_COUNTRY_CRD":return Object(m.a)({},e,{CRD:t.payload});case"SET_SINGLE_COUNTRY_scatterType":return Object(m.a)({},e,{scatterType:t.payload});case"SET_SINGLE_COUNTRY_pieDateSingle":return Object(m.a)({},e,{pieDateSingle:t.payload});case"SET_SINGLE_COUNTRY_dateRange":return Object(m.a)({},e,{dateRange:t.payload});case"SET_SINGLE_COUNTRY_xaxisDateDiff":return Object(m.a)({},e,{xaxisDateDiff:t.payload});default:return e}},se=Object(ne.combineReducers)({visualizeData:le,plotReducer:oe,singleCountryData:ue}),me=a(142),pe=a(143),de=[me.a],fe=Object(ne.createStore)(se,Object(pe.composeWithDevTools)(ne.applyMiddleware.apply(void 0,de)));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k.a,{store:fe},r.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[145,1,2]]]);
//# sourceMappingURL=main.e1635b86.chunk.js.map